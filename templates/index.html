<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>YouTubeç‚ä¸Šåº¦ãƒã‚§ãƒƒã‚«ãƒ¼</title>

    <!-- CSPï¼ˆå³æ ¼ç‰ˆï¼‰ -->
    <meta http-equiv="Content-Security-Policy"
    content="
        default-src 'self';
        script-src 'self';
        style-src 'self' https://fonts.googleapis.com;
        font-src https://fonts.gstatic.com;
    ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
<div class="container">

    <h1>ğŸ”¥ YouTubeç‚ä¸Šåº¦ãƒã‚§ãƒƒã‚«ãƒ¼</h1>

    <form method="POST">
        <input type="text" name="video_url" placeholder="YouTubeã®URLã‚’å…¥åŠ›" required>
        <button type="submit">åˆ†æã™ã‚‹</button>
    </form>

    {% if result %}
    <div class="result-box">
        <h2>{{ result.title }}</h2>
        <p>ç·ã‚³ãƒ¡ãƒ³ãƒˆæ•°ï¼š{{ result.total }}</p>
        <p>ãƒã‚¬ãƒ†ã‚£ãƒ–ç‡ï¼š{{ result.negative_rate }}%</p>
        <p>ç‚ä¸Šã‚¹ã‚³ã‚¢ï¼š{{ result.fire_score }}</p>

        <div class="gauge-fill"
            data-width="{{ result.fire_score if result.fire_score < 100 else 100 }}"
            data-color="{{ color }}">
        </div>

        <a href="https://www.youtube.com/watch?v={{ result.video_id }}"
           target="_blank"
           rel="noopener noreferrer"
           class="watch-btn">
            â–¶ YouTubeã§è¦‹ã‚‹
        </a>
    </div>
    {% endif %}

    <h2>ğŸ”¥ ç‚ä¸Šãƒ©ãƒ³ã‚­ãƒ³ã‚°TOP10</h2>
    <ul>
        {% for video_id, title, score in rankings %}
        <li>
            {{ title }} - {{ score }}

            <div class="ranking-buttons">
                <a href="https://www.youtube.com/watch?v={{ video_id }}"
                   target="_blank"
                   rel="noopener noreferrer">
                   â–¶ è¦–è´
                </a>

                <button onclick="shareToX('{{ title }}', '{{ video_id }}')">
                    ğŸ¦ XæŠ•ç¨¿
                </button>
            </div>
        </li>
        {% endfor %}
    </ul>

</div>

<!-- JS -->
<script src="/app.js"></script>
<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
